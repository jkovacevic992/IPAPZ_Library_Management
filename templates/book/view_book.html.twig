{% extends 'base.html.twig' %}

{% block body %}
    <div class="row mt-3">
        <div class="col-lg-12">
            <div class="jumbotron">
                <div class="row">
                    <div class="col-lg-9">
                        {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_EMPLOYEE') %}
                            <br/><a href="{{ path('edit_book', {'id': book.id}) }}" class="btn btn-primary">Edit</a>
                            <br/><a href="{{ path('book_delete', {'id': book.id}) }}" class="btn btn-danger">Delete Book</a>

                            {% elseif is_granted('ROLE_USER') and app.user.membership%}
                                <a href="{{ path('add_book', {'id' : book.id}) }}" class="btn btn-primary">Add to my Wishlist</a>
                                {% if book.quantity == 0 and book.reservation == null and not borrowedByUser %}
                                    <p>No available copies of this book at the moment</p>
                                    <a href="{{ path('reserve_book', {'id' : book.id}) }}" class="btn btn-primary">Reserve</a>
                                {% endif %}
                        {% endif %}
                        <h6 class="card-subtitle mt-2 text-muted">{{ book.author }}</h6>
                        <p class="card-text">{{ book.name }}</p>
                        <p class="card-text">Genres:
                            {% for genre in book.bookGenre %}

                        <h6 class="card-text">{{ genre.genre.name }}  </h6>

                        {% endfor %}
                        </p>
                        <p class="card-text">Quantity: {{ book.quantity }}</p>

                        {% if book.images != null %}
                            {% for image in book.images %}
                                {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_USER') %}
                                    <a href="{{ path('set_main_image', {'id': book.id,'imageName': image}) }} "/> <img
                                        style="max-width: 100px" src="../../uploads/images/{{ image }}"><a/>
                                {% else %}
                                    <img style="max-width: 100px" src="../../uploads/images/{{ image }}">
                                {% endif %}
                            {% endfor %}


                        {% endif %}
                        <br/>
                        <p>Summary:</p>
                        <p class="text-left">{{ book.summary }}</p>
                    </div>


                </div>


            </div>
        </div>
    </div>



{% endblock %}
